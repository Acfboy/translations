---
title: "ARC150_C_translation.md"
tags: []
author: ""
created: ""
---

## 题意 

有一张 $N$ 个点，$M$ 条边的无向联通图 $G$，节点被编号为 $1$ 到 $N$，第 $i$ 条边连接 $U_i$ 和 $V_i$。

已知一个长度为 $N$ 的序列 $A=(A_1,A_2,...,A_N)$，以及一个长度为 $K$ 的的序列 $B=(B_1,B_2,...,B_K)$。

判断 $G$ 是否满足以下条件。

- 对于 $G$ 中任意一条 $1$ 到 $N$ 的简单路径 $(v_1,v_2,...v_k)(v_1=1,v_k=N)$ ，$B$ 是 $(A_{v_1},A_{v_2},...,A_{v_k})$ 的子序列（不一定连续）。

## 数据范围

- $2\le N\le 10^5$
- $1\le K\le N$
- $N-1\le M\le 2\times 10^5$
- $1\le U_i<V_i\le N$
- 对于 $i\ne j$，$(U_i,V_i)\ne (U_j,V_j)$。
- $1\le A_i,B_i\le N$。
- 保证 $G$ 联通。

## 输入格式

第一行三个数 $N,M,K$。

接下来 $M$ 行，每行两个数 $U_i,V_i$。

下面一行 $N$ 个数，表示 $A$。

再下面一行 $K$ 个数，表示 $B$。

## 输出格式

如果合法，输出 `Yes`，否则输出 `No`。

## 样例

### 样例输入1

```
6 6 3
1 2
1 3
2 4
3 5
4 6
5 6
1 2 4 5 2 6
1 2 6
```

### 样例输出1

```
Yes
```

### 样例解释1

有两条简单路径：$(1,2,4,6),(1,3,5,6)$，那么序列 $(A_{v_1},A_{v_2},...,A_{v_k})$ 可能是 $(1,2,5,6),(1,4,2,6)$，$B$ 是这两个序列的子序列，所以输出 `Yes`。

### 样例输入2

```
5 5 3
1 2
2 3
3 4
4 5
2 5
1 2 3 5 2
1 3 2
```

### 样例输出2

```
No
```

### 样例解释2

一条简单路径 $(1,2,5)$，那么 $(A_{v_1},A_{v_2},...,A_{v_k})=(1,2,2)$，$B$ 不是它的子序列。

### 样例输入3

```
10 20 3
5 6
5 10
5 7
3 5
3 7
2 6
3 8
4 5
5 8
7 10
1 6
1 9
4 6
1 2
1 4
6 7
4 8
2 5
3 10
6 9
2 5 8 5 1 5 1 1 5 10
2 5 1
```

### 样例输出3

```
Yes
```

